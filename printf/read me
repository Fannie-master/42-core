âœ…é¡¹ç›®ç›®æ ‡
é‡æ–°åˆ›å»ºä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬ï¼Œprintf()æ”¯æŒä¸€ç»„å›ºå®šçš„æ ¼å¼è¯´æ˜ç¬¦å¹¶è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼ˆstdoutï¼‰ï¼Œè¿”å›æ‰“å°çš„å­—ç¬¦æ•°ã€‚

ğŸ“Œå¿…éœ€çš„è½¬æ¢è¯´æ˜ç¬¦
æ‚¨å¿…é¡»å®ç°è¿™äº›ï¼š


Specifier	        Meaning	                        Example Output
%c	        Character	                            'A'
%s	        String	                                "Hello"
%p	        Pointer (printed in hex, prefixed 0x)	0x7ffeef...
%d / %i	    Signed decimal integeræœ‰ç¬¦å·åè¿›åˆ¶æ•´      -123
%u	        Unsigned decimal integer	            123
%x	        Unsigned hex (lowercase)	            7f3a
%X	        Unsigned hex (uppercase)	            7F3A
%%	        Literal percent sign	                %

ğŸ§ å‡½æ•°åŸå‹
c
int ft_printf(const char *format, ...);
ä½¿ç”¨stdarg.hï¼ˆva_listï¼Œï¼Œï¼Œï¼‰æ¥å¤„ç†å¯å˜å‚æ•°va_startã€‚va_argva_end

ğŸ› ï¸å®æ–½è®¡åˆ’
1.ä»ä¸»è°ƒåº¦ç¨‹åºå¼€å§‹
å¾ªç¯éå†formatå­—ç¬¦ä¸²å¹¶ç›´æ¥æ‰“å°å­—ç¬¦ï¼Œé™¤éä½ ç‚¹å‡»%ã€‚ç„¶åæ ¹æ®æ ¼å¼è¯´æ˜ç¬¦åˆ†æ´¾åˆ°è¾…åŠ©å‡½æ•°ã€‚

c
int ft_printf(const char *format, ...)
{
    va_list args;
    int     count = 0;
    int     i = 0;

    va_start(args, format);
    while (format[i])
    {
        if (format[i] == '%' && format[i + 1])
        {
            count += handle_format(format[++i], args);
        }
        else
            count += write(1, &format[i], 1);
        i++;
    }
    va_end(args);
    return (count);
}
2.å¤„ç†æ¯ä¸ªè¯´æ˜ç¬¦ï¼ˆhandle_formatï¼‰
c

int handle_format(char c, va_list args)
{
    if (c == 'c')
        return (ft_putchar(va_arg(args, int)));
    else if (c == 's')
        return (ft_putstr(va_arg(args, char *)));
    else if (c == 'p')
        return (ft_putptr(va_arg(args, void *)));
    else if (c == 'd' || c == 'i')
        return (ft_putnbr(va_arg(args, int)));
    else if (c == 'u')
        return (ft_putunbr(va_arg(args, unsigned int)));
    else if (c == 'x')
        return (ft_puthex(va_arg(args, unsigned int), 0));
    else if (c == 'X')
        return (ft_puthex(va_arg(args, unsigned int), 1));
    else if (c == '%')
        return (ft_putchar('%'));
    return (0);
}
3.ä½ éœ€è¦çš„è¾…åŠ©å‡½æ•°
æ‚¨åº”è¯¥åˆ›å»ºè‡ªå·±çš„ç‰ˆæœ¬ï¼š

3.1 ft_putchar(int c, int fd)

3.2 ft_putstr(char *s, int fd)

3.3 ft_putnbr(int n, int fd)â€“ æœ‰ç¬¦å·æ•´æ•°

3.4 ft_putunbr(unsigned int n)â€“ æ— ç¬¦å·æ•´æ•°

3.5 ft_puthex_lower(unsigned int n, int fd)- ä¸ºäº†%x

3.6 ft_puthex_upper(unsigned int n, int fd)- ä¸ºäº†%X

3.7 ft_putptr(void *ptr)0xâ€“ æ‰“å°å¸¦æœ‰å‰ç¼€çš„åå…­è¿›åˆ¶æŒ‡é’ˆ

ğŸ’¡æ¯ä¸ªåŠ©æ‰‹éƒ½åº”è¯¥è¿”å›æ‰“å°çš„å­—ç¬¦æ•°ï¼Œè¿™å°±æ˜¯æ„å»ºæ€»è¿”å›å€¼çš„æ–¹å¼ã€‚

4.ç¦åˆ©ï¼šè¿›åˆ¶è½¬æ¢åŠ©æ‰‹
è¦æ‰“å°åå…­è¿›åˆ¶ã€åè¿›åˆ¶ç­‰ï¼Œæ‚¨å¯èƒ½éœ€è¦å¦‚ä¸‹å‡½æ•°ï¼š

c
int ft_putnbr_base(unsigned long nbr, char *base);
ä¾‹å¦‚ï¼š

c

ft_putnbr_base(255, "0123456789abcdef"); // prints "ff"
ğŸ”§ æ„å»ºè¯´æ˜
æ‚¨å¿…é¡»ç¼–è¯‘é™æ€åº“ï¼š

ç‹‚æ¬¢

ar rcs libftprintf.a *.o
è¯·å‹¿ä½¿ç”¨ã€‚â€‹libtool

ç”¨äºMakefileè‡ªåŠ¨åŒ–æ„å»ºã€‚

æ‚¨çš„.cæ–‡ä»¶åº”è¯¥è¢«ç¼–è¯‘æˆ.oï¼Œç„¶åæ†ç»‘æˆlibftprintf.aã€‚

ğŸ§ª æµ‹è¯•
ä½¿ç”¨æ‚¨çš„å®ç°ä¸å®é™…æƒ…å†µprintfè¿›è¡Œæµ‹è¯•ï¼š

c

ft_printf("Hello %s, %d, 0x%x\n", "world", 42, 255);
printf("Hello %s, %d, 0x%x\n", "world", 42, 255);
æŸ¥çœ‹ï¼š

è¾“å‡ºåŒ¹é…å—ï¼Ÿ

è¿”å›å€¼æ­£ç¡®å—ï¼Ÿ

âœ… æ‘˜è¦æ¸…å•
 %cï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œ%sâ€‹%pâ€‹%dâ€‹%iâ€‹%uâ€‹%xâ€‹%Xâ€‹%%

 ç”¨é€”va_listå’Œwrite()ä»…

 è¿”å›æ‰“å°çš„å­—ç¬¦æ€»æ•°

 å¦printfã€sprintfã€itoaã€mallocæˆ–libtool

 åˆ›é€ libftprintf.aâ€‹ar

